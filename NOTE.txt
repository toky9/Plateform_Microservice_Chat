1Ô∏è‚É£ Installer NestJS CLI (si pas d√©j√†)
npm install -g @nestjs/cli


V√©rifie la version :

nest --version

2Ô∏è‚É£ Cr√©er le projet NestJS
nest new chat-service


Choisis npm ou yarn selon ton projet

Option Yes pour ESLint / Prettier si tu veux

3Ô∏è‚É£ Installer les d√©pendances essentielles
Prisma + PostgreSQL
cd chat-service
npm install @prisma/client
npm install -D prisma
npm install @nestjs/config
npm install @nestjs/jwt passport-jwt @nestjs/passport passport
npm install @nestjs/platform-socket.io
npm install multer @nestjs/platform-express

npm install --save multer
npm install --save-dev @types/multer


4Ô∏è‚É£ Initialiser Prisma
npx prisma init


Cr√©e le fichier .env avec DATABASE_URL

Cr√©e le dossier prisma/schema.prisma

5Ô∏è‚É£ Modifier schema.prisma

Copie le mod√®le que je t‚Äôai fourni pr√©c√©demment (Conversation, Message, etc.)

6Ô∏è‚É£ G√©n√©rer le client Prisma
npx prisma generate


V√©rifie que node_modules/.prisma/client est cr√©√©

7Ô∏è‚É£ Migrer la base de donn√©es
npx prisma migrate dev --name init


Cette commande cr√©e la base si elle n‚Äôexiste pas et applique les tables

8Ô∏è‚É£ Cr√©er les modules NestJS
nest generate module prisma
nest generate service prisma
nest generate module users
nest generate module conversations
nest generate module messages
nest generate module upload
nest generate module websocket

9Ô∏è‚É£ Cr√©er les controllers
nest generate controller conversations
nest generate controller messages
nest generate controller upload

üîü Cr√©er les DTOs

Dans chaque module (conversations/dto, messages/dto), cr√©e tes fichiers DTO selon ton frontend
Exemple :

// messages/dto/create-message.dto.ts
export class CreateMessageDto {
  conversationId: string
  senderId: string
  content: string
  type?: 'text' | 'image' | 'file'
  fileName?: string
  fileSize?: string
  replyTo?: { id: string; senderId: string; content: string }
}

1Ô∏è‚É£1Ô∏è‚É£ Cr√©er le WebSocket Gateway
nest generate gateway websocket/chat


Mets le code que je t‚Äôai fourni pr√©c√©demment dans chat.gateway.ts

1Ô∏è‚É£2Ô∏è‚É£ Configurer .env

Exemple :

DATABASE_URL="postgresql://user:password@localhost:5432/chatdb?schema=public"
JWT_SECRET="ton_secret_jwt"
PORT=3001

1Ô∏è‚É£3Ô∏è‚É£ Lancer le microservice
npm run start:dev


L‚ÄôAPI devrait tourner sur http://localhost:3001/api

Le WebSocket sur ws://localhost:3001/api/ws

1Ô∏è‚É£4Ô∏è‚É£ (Optionnel) Visualiser la base avec Prisma Studio
npx prisma studio


Tu peux voir et √©diter tes Users, Conversations, Messages

‚úÖ R√©sultat attendu

API REST compatible avec ton chat.service.ts

WebSocket fonctionnel

Prisma pr√™t production

JWT pr√™t pour s√©curiser ton chat